<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
<head>
<title>ORCA</title>
<link rel="stylesheet" href="generic2.css" type="text/css" />
</head>
<body>

<!-- Do not edit or remove this line: it causes add_sidebar.pl to add the menu -->


<p>&nbsp;</p>
<h1>
The Orca Build System
</h1>

<p>Orca uses <a href="http://www.cmake.org">CMake</a> to handle its build system.
CMake is a cross-platform tool, designed as a replacement for autotools.</p>

<h2>Basics</h2>

<p>Builds are controlled by a set of files called 'CMakeLists.txt'.  There
is approximately one in each directory, and builds descend recursively through the source tree.</p>

<p>If you just want to see how to initiate a build, see the top-level 'INSTALL'
file in Orca2.</p>

<h2>Orca2 Details</h2>

<p>The build system for orca2 consists of a set of 'CMakeLists.txt' files, many of which INCLUDE a set of helper '.cmake' files.  The '.cmake' files live in the top-level 'config' directory.</p>

<p>The top-level 'CMakeLists.txt' file:
<ol>
<li>Calls config/global_setup.cmake, which checks for global requirements like Ice.</li>
<li>Calls config/check_depend.cmake, which checks for a bunch of things that might be needed by one or more components.  These checks set variables which can be used by components later on.</li>
</ol>
</p>

<p>Individual components maintain their own 'CMakeLists.txt' files.  Components will generally INCLUDE the following:
<ol>
<li>config/component_rules.cmake: Contains rules for compiler/linker flags, plus any other component-kruft.</li>
<li>possibly: config/include_orcaiceutil.cmake: Contains all the rules to include orcaiceutil, to avoid repetition.</li>
</ol>
</p>

<p>Components should build themselves with GLOBAL_ADD_EXECUTABLE rather than ADD_EXECUTABLE.  This allows their builds to be mediated in a central location.</p>

<p>Note for libraries: In order for files to be able to '#include' header files the same when they're in situ (within the distribution) as when they're installed, all '#included' header files live in subdirectories called 'orca'.  Source files then '#include' the directory above.</p>

<h2>Documentation</h2>

<p>In order to be able to build the documentation locally, you need the following:</p>
<ul>
  <li>doxygen
  </li>
  <li>sgml2x
  </li>
</ul>

<p>(On debian, install with: <code>sudo apt-get install doxygen sgml2x</code>)</p>

<p>To build it, do:</p>
<ul>
  <li><code>cd doc; ./build_all_documentation</code>
  </li>
</ul>


<!-- Do not edit or remove this line: it causes add_sidebar.pl to add the footer -->


</body>
</html>
