<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >
<head>
<title>ORCA</title>
<link rel="stylesheet" href="generic2.css" type="text/css" />
</head>
<body>

<!-- Do not edit or remove this line: it causes add_sidebar.pl to add the menu -->


<p>&nbsp; </p>

<h1>
C++ Programming Style Guide
</h1>

  <p>
        This is a loose style guide for programming within the
        Orca framework.  It exists for two reasons: to maintain
        a legible and uniform code-base, and to reduce bugs.
  </p>

  <p>Some examples and ideas were taken from this useful website: <a
  href="http://www.possibility.com/Cpp/CppCodingStandard.html">http://www.possibility.com/Cpp/CppCodingStandard.html</a></p>

  <h2>General Guidelines</h2>

      <p>In general, code should err on the side of being amply
      white-spaced and spread out, and newlines should separate
      logical blocks of code.</p>

      <p>Use asserts everywhere to check function parameters, to check
      return values and anywhere where there could possibly be an
      error. It is better for the system to crash and burn in a
      blatantly obvious way than to introduce insidious bugs</p>

      </p>Try hard to avoid global variables! Use namespaces instead.</p>

   <h2>Naming Conventions</h2>

<h3>General</h3>

<p>When naming code entities, be as descriptive as possible, ie
maxFeathersPerBird instead of maxFeath.</p>

<p>Do not use "Hungarian" notation, e.g. no fWidth for a double,
CMyClass for a class or SMyStructure for a structure. It's unnecessary
with type-safe languages and is very confusing if the type actually
changes and the name doesn't.</p>

<h3>Varables</h3>

<p>Variable names begin with low-case letter and each next word is
capitalized.</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
int    x;
my_t   myLittleVariable;
</PRE></TD></TR></TBODY></TABLE>

<h3>Classes and Structures</h3>

<p>Class and structure names begin with a capital, and each new word begins with a capital
(no "_" or "-").</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
Class     BigBird;
double    bigBird;
</PRE></TD></TR></TBODY></TABLE>

<h3>Member Variables</h3>

<p>Same as normal variables but appended by "_". This prevents bugs
and makes code clearer, letting you know instantly where the variable
is defined.</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
...
    // normal variable
    int    x_;

    // compare to member variable
    my_t   myMemberVariable_;
...
</PRE></TD></TR></TBODY></TABLE>

<h3>Member Functions</h3>

<p>Member function begin with low case letters, each next word is
capitalized.  This is the same rule as normal variables, but member
function names are followed by parameter lists "(..)" and usually
contain verbs.</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
...
    // member function
    void    setBirdFree();

    // compare to member variable
    bool    setBirdFree_;
...
</PRE></TD></TR></TBODY></TABLE>

<h4>access functions</h4>

<p>same name as the member variable which they provide access to
(without "_").</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
...
public:
    // access function
    int    x();
private:
    // member variable
    int    x_;
...
</PRE></TD></TR></TBODY></TABLE>

<h4>assignment functions</h4>

<p>prepend "set" to member variable without "_"</p>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
...
public:
    // assignment function
    int    setX();
private:
    // member variable
    int    x_;
...
</PRE></TD></TR></TBODY></TABLE>

<h3>Class Example</h3>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
class BigBird
{
public:

    BigBird()
    ~BigBird()

    // Release the named bird
    bool setBirdFree( char *birdName );

    // access
    int  numWings() { return numWings_; };
    void setNumWings( int numWings ) { numWings_ = numWings };

private:

    int numWings_;

};
</PRE></TD></TR></TBODY></TABLE>

<h3>Namespaces</h3>

<p>Begin with low case, each next word is capitalized. This is the
same format as used for normal variables and member functions. Easily
destinguished from the other two by "::".  Keeping namespace names
reasonably short makes code more readable.</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
namespace myProject
{
    void writeThesis();
}
...
    // function in namespace
    myProject::writeThesis();

    // compare to a class member function
    MyClass::writeThesis();
...
</PRE></TD></TR></TBODY></TABLE>

<p>As a general rule, do not place "using" directives in header files. They propogate down into
every source (.cpp) file that includes your  headers, whether or not the calling programmer
wanted to import the entire namespace (e.g. std). Some projects may have their own
classes called map, or string, or list and a single "using" statement deep inside nested
header files can cause unanticipated namespace collisions.</p>

<p>In general, it's safest and most polite to refer to classes canonically in header files (std::string, etc), and keep the "using" statements in your implementation files.</p>

<strong>right:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>// myclass.h
...
class MyClass
{
    std::vector&ltstd::string&gt names_; 
}
...
</PRE></TD></TR></TBODY></TABLE>

<strong>wrong:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
// myclass.h
...
using std;

class MyClass
{
    vector&ltstring&gt names_; 
}
...
</PRE></TD></TR></TBODY></TABLE>


      <h3>#defines</h3>

      <p>all uppercase to distinguish them from functions and variables.</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
#define VERY_BIG_NUMBER 5
</PRE></TD></TR></TBODY></TABLE>


      <h3>Enums</h3>

      <p>elements should have a prefix similar to their name. Each
      enum should have a final element called _NUM_OF - this allows
      bounds checking and is useful for many things besides. E.g.:</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
enum PinStateType
{
    PST_OFF = 0,
    PST_ON,
    ...
    PST_NUM_OF
};
</PRE></TD></TR></TBODY></TABLE>

<h3>File Names</h3>

<p>All low case for ease of porting to non-Unix file systems. To keep the Unix
systems happy, no spaces in file names are allowed. Extensions should be formed as follows:</p>

<strong>C++:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
myclass.h
myclass.cpp
</PRE></TD></TR></TBODY></TABLE>

<strong>C:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
myclass.h
myclass.c
</PRE></TD></TR></TBODY></TABLE>

<h2>Declarations</h2>
<h3> Header Files</h3>

      <p>As much as possible, keep #includes out of header files as
      this can create large chains of dependencies that increase
      compile times. Ideally a header file for a class includes only
      the baseclass.hpp.</p>

      <p>Parameter lists in header files should always include the
      parameters' names:</p>

<strong>right:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
void drawBird( int height, int width, char *title );
</PRE></TD></TR></TBODY></TABLE>

<strong>wrong:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
void drawBird( int, int, char* );
</PRE></TD></TR></TBODY></TABLE>

      <p>Try to use inlines rather than defines to do simple
      operations as it makes debugging a lot easier and lets the
      compiler catch more errors.</p>

      <p>A header file should contain exactly one class, and no major
      code.  Inlines should be no longer than a couple of
      statements.</p>

      <p>When using #ifndef to prevent multiple loading of header
      files, make sure that the #define will remain unique if your
      header file is used in a different project. Prepend project name
      or other distinguishing feature. Eg.</p>

<strong>right:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
#ifndef MYPROJECTNAME_POINT_H
...
#define MYPROJECTNAME_POINT_H
</PRE></TD></TR></TBODY></TABLE>

<strong>wrong:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
#ifndef POINT_H
...
#define POINT_H
</PRE></TD></TR></TBODY></TABLE>

<h3>Source Files</h3>
      <p>Variables should be declared on their own lines, for ease of
      reading and commenting:</p>

<strong>right:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
char **a;        // add comment
char  *x;        // add comment
</PRE></TD></TR></TBODY></TABLE>

<strong>wrong:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
char **a, *x;
</PRE></TD></TR></TBODY></TABLE>

<h2>Documentation</h2>

      <h3>Comments</h3>

      <p>Ideally, code should be so legible that it should speak for
      itself. In general each comment should be on a line all on its
      own, not placed after code.</p>

      <p>Comments inside brackets are handy to say what each case
      does, ie:</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
if (error == true)
{
    // error occurred, so quit
    return;
}
else
{
    // no error
    printf("hello");
}
</PRE></TD></TR></TBODY></TABLE>

<h3>Doxygen</h3>

<p>Doxygen is encouraged as a useful tool for generating documentation
directly from code.  For simple usage:</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
//! This comment will apear in the doxygen documentation
/*! So will this one */
function doSomething();

// This one will only appear in the code
/* So will this one */
function doSomethingElse();
</PRE></TD></TR></TBODY></TABLE>

<p>See <a href="http://www.doxygen.org">the doxygen documentation</a> for more details.</p>

<h2>Cosmetic</h2>

      <h3>Bracketting</h3>

      <p>If statements and loops should always be bracketed, even for
      a single line of code. This reduces bugs caused by adding extra
      lines within an if statement.</p>

<strong>right:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
if (number == 10)
{
    doSomething();
}
</PRE></TD></TR></TBODY></TABLE>

<strong>wrong:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
if (number == 10)
   doSomething();
</PRE></TD></TR></TBODY></TABLE>

      <p>Brackets should have a line to themselves as this makes it a
      lot easier to spot missing brackets in large nested constructs.</p>

<strong>right:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
if (condition)        while (condition)
{                     {
    ...                   ...
}                     }
</PRE></TD></TR></TBODY></TABLE>

<strong>wrong:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
if (condition) {      while (condition) {
    ...                   ...
}                     }
</PRE></TD></TR></TBODY></TABLE>

      <h3>Indenting</h3>

      <p>Code should be indented in the 'stroustrup' style.  This
      means four spaces between indentation levels.</p>

      <p>There should be no hard tabs.  That is, four spaces should be
      four spaces rather than a single 'tab'.  This means that code is
      still readable if someone else's editor represents tabs
      differently.  Most editors can be set up to do this.</p>


<h3>Conditional Statements</h3>

      <p>When checking for null pointers or Boolean values, use the
      full == or != sign. This makes the code easier to
      understand:</p>

<strong>right:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
if (controller_ != NULL)
{
    controller_->doSomething();
}
</PRE></TD></TR></TBODY></TABLE>

<strong>wrong:</strong></br>
<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
if (controller_)
{
    controller_->doSomething();
}
</PRE></TD></TR></TBODY></TABLE>

      <h3>Case statements</h3>

      <p>These should be amply tabbed to make the code clearer, ie:</p>

<TABLE CLASS="ex" cellSpacing=0 width="100%" border=1><TBODY><TR><TD><PRE>
switch (blah)
{
case 1 :
    doSomething();
    break;
default :
    doSomethingDifferent();
    break;
}
</PRE></TD></TR></TBODY></TABLE>

      <p>Always include a default case, even if you think it will
      never be hit.  Each case should have a 'break;', even if you
      think it will never be hit.  Adhering to this reduces bugs.</p>

<br><br><br>
<hr>
Author: Alex Brooks 9-Jun-2004.<br>

Acknowledgements: This style guide was mostly taken from the ACFR Fish-Bird project, courtesy of James Hudson.
<hr>


  <!-- Do not edit or remove this line: it causes add_sidebar.pl to add the footer -->


</body>
</html>
